<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy Valentine's Day</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #fdf2f5;
            --env-body: #f06292;
            --env-lid: #f48fb1;
            --wax-color: #e91e63;
            --paper-color: #ffffff;
            --text-color: #444444;
        }

        /* 2. ç¦ç”¨é é¢æ»¾å‹•çš„æ ¸å¿ƒè¨­å®š */
        body, html {
            margin: 0; padding: 0; 
            width: 100%; height: 100%; 
            overflow: hidden; /* ç¦æ­¢æº¢å‡º */
            position: fixed;  /* å¼·åˆ¶é–å®šç•«å¸ƒ */
            touch-action: none; /* ç¦æ­¢ç€è¦½å™¨é è¨­æ»‘å‹•è¡Œç‚º (é‡è¦) */
            background-color: var(--bg-color);
            display: flex; justify-content: center; align-items: center;
            font-family: 'Zhi Mang Xing', 'Kaiti TC', 'DFKai-SB', 'BiauKai', 'STKaiti', serif;
        }

        .hint {
            position: absolute; top: 10%; color: #ad1457;
            font-size: 1.2rem; animation: bounce 2s infinite;
            pointer-events: none; width: 100%; text-align: center;
        }

        .envelope-container {
            position: relative; width: 320px; height: 210px;
            z-index: 10;
        }

        .envelope {
            position: relative; width: 100%; height: 100%;
            background-color: var(--env-body);
            border-radius: 0 0 5px 5px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            display: flex; justify-content: center;
        }

        .envelope::after {
            content: ""; position: absolute; inset: 10px;
            border: 2px dashed rgba(255,255,255,0.5);
            border-radius: 4px; pointer-events: none; z-index: 40;
        }

        .lid {
            position: absolute; top: 0; left: 0; width: 0; height: 0;
            border-left: 160px solid transparent;
            border-right: 160px solid transparent;
            border-top: 115px solid var(--env-lid);
            transform-origin: top;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 50;
            filter: drop-shadow(0 2px 3px rgba(0,0,0,0.1));
        }

        /* 1. ä¿®æ­£ï¼šç¸®å°å­—é«”ä¸¦èª¿æ•´ä½ç½®ç¢ºä¿ä¸è¶…å‡º */
        .lid-text {
            position: absolute; 
            top: -100px;       /* ç¨å¾®å¾€ä¸‹ç§»ä¸€é» */
            left: -160px;     /* åŸºæ–¼ border hack çš„ä¸­å¿ƒé»åç§» */
            width: 320px;     /* å¯¬åº¦èˆ‡ä¿¡å°ä¸€è‡´ */
            text-align: center;
            font-family: 'Great Vibes', cursive; 
            font-size: 24px;  /* å­—é«”ç¸®å°ï¼Œé¿å…è¶…å‡º */
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            pointer-events: none;
        }

        .heart-seal {
            position: absolute; top: 85px; left: 50%; transform: translateX(-50%);
            width: 60px; height: 60px;
            background-color: var(--wax-color);
            z-index: 60; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: all 0.4s ease;
        }
        
        .heart-seal::before {
            content: ""; position: absolute; width: 34px; height: 34px;
            background-color: #ff80ab; top: 15px;
            clip-path: path('M17 31.5L14.9 29.6C7.5 22.9 2.5 18.3 2.5 12.7 2.5 8.1 6.1 4.5 10.7 4.5 13.3 4.5 15.8 5.7 17 7.6 18.2 5.7 20.7 4.5 23.3 4.5 27.9 4.5 31.5 8.1 31.5 12.7c0 5.6-5 10.2-12.4 16.9L17 31.5z');
        }

        /* 3. ä¿®æ­£ï¼šä¿¡ç´™æ’ç‰ˆèˆ‡æº¢å‡ºè™•ç† */
        .letter {
            position: absolute; 
            top: 10px; bottom: 10px; /* ä¸Šä¸‹ç•™é‚Š */
            left: 10px; right: 10px; /* å·¦å³ç•™é‚Š */
            background: var(--paper-color);
            /* æ¸›å°‘ä¸Šæ–¹ Paddingï¼Œè®“æ–‡å­—å¾€ä¸Šå°é½Š */
            padding: 0px 15px; 
            box-sizing: border-box;
            border-radius: 4px;
            z-index: 10; opacity: 0;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.1), opacity 0.3s;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            display: flex; flex-direction: column; justify-content: flex-start;
            
            /* é—œéµï¼šé˜²æ­¢æ–‡å­—è¶…å‡ºä¿¡ç´™ */
            overflow: hidden; 
        }

        /* å¦‚æœæ–‡å­—çœŸçš„å¤ªå¤šï¼Œå…è¨±ä¿¡ç´™å…§éƒ¨æ²å‹•ï¼Œä½†éš±è—æ²è»¸ */
        .letter-content {
            width: 100%; height: 100%;
            font-size: 1.15rem; /* å­—é«”é©ä¸­ */
            color: var(--text-color); 
            line-height: 1.2;
            text-align: left;
            white-space: pre-wrap;
            overflow-y: auto; /* å…§å®¹éé•·å¯æ»‘å‹• */
            scrollbar-width: none; /* Firefox éš±è—æ²è»¸ */
        }
        .letter-content::-webkit-scrollbar { display: none; /* Chrome/Safari éš±è—æ²è»¸ */ }

        /* é–‹ä¿¡å‹•ç•« */
        .open .lid { transform: rotateX(180deg); z-index: 0; }
        .open .heart-seal { opacity: 0; transform: translateX(-50%) scale(0.5); }
        .open .letter { opacity: 1; transform: translateY(-180px); z-index: 30; }

        .particle {
            position: absolute; pointer-events: none; z-index: 100;
            font-size: 20px; color: #ff4081; animation: fly 1.5s ease-out forwards;
        }
        @keyframes fly {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--x), var(--y)) rotate(var(--r)) scale(0); opacity: 0; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>

    <div class="hint">ä¸Šæ»‘æ‹†ä¿¡å° ğŸ’Œ</div>

    <div class="envelope-container" id="container">
        <div class="envelope" id="env">
            <div class="lid">
                <div class="lid-text">Happy Valentine's Day</div>
            </div>
            <div class="heart-seal"></div>
            <div class="letter">
                <div class="letter-content">
èŒœèŒœå¯¶è² æƒ…äººç¯€å¿«æ¨‚
è¬è¬ä½ å‡ºç¾åœ¨æˆ‘çš„ç”Ÿå‘½è£¡ã€‚
ä½ å‡ºç¾å¾Œï¼Œå¹³å‡¡çš„æ—¥å­éƒ½è®Šå¾—ç‰¹åˆ¥ï¼Œç”Ÿæ´»ä¹Ÿé–‹å§‹æœ‰äº†æ„ç¾©ã€‚
ä½ ä¸åªæ˜¯æˆ‘æ„›çš„äººï¼Œæ›´æ˜¯æˆ‘æƒ³ä¸€ç›´æ”¾åœ¨å¿ƒä¸Šã€å¥½å¥½çæƒœçš„äººã€‚
ä½ å€¼å¾—ä¸–é–“æœ€å¥½çš„ä¸€åˆ‡â¤ï¸
                </div>
            </div>
        </div>
    </div>

    <script>
        const container = document.getElementById('container');
        const env = document.getElementById('env');
        let startY = 0;

        container.addEventListener('touchstart', e => { startY = e.touches[0].pageY; }, {passive: false});
        
        container.addEventListener('touchend', e => {
            let endY = e.changedTouches[0].pageY;
            let distance = startY - endY;
            
            if (distance > 50 && !env.classList.contains('open')) { 
                env.classList.add('open');
                document.querySelector('.hint').style.opacity = '0';
                spawnHearts();
            } else if (distance < -50) { 
                env.classList.remove('open');
            }
        });

        function spawnHearts() {
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.innerHTML = 'â¤ï¸';
                heart.className = 'particle';
                const x = (Math.random() - 0.5) * 350;
                const y = -(Math.random() * 250 + 80);
                const r = Math.random() * 360;
                heart.style.setProperty('--x', `${x}px`);
                heart.style.setProperty('--y', `${y}px`);
                heart.style.setProperty('--r', `${r}deg`);
                heart.style.left = '50%';
                heart.style.top = '60%'; 
                container.appendChild(heart);
                setTimeout(() => heart.remove(), 1500);
            }
        }
    </script>
</body>

</html>
